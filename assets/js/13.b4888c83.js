(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{823:function(s,a,t){"use strict";t.r(a);var e=t(112),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",[s._v("Git 多账户配置")]),s._v(" "),t("h2",{attrs:{id:"应用场景"}},[s._v("应用场景 "),t("a",{staticClass:"header-anchor",attrs:{href:"#应用场景"}},[s._v("#")])]),s._v(" "),t("p",[s._v("我们经常将代码托管到Github、Gitlab这样的网站上，为了避免每次push代码时都要输入用户名和密码，通常会选择使用ssh协议，将公钥保存到托管网站上。日常开发过程中，我们可能遇到需要在同一电脑上配置多个Git账户的情况；Github、公司的Git服务器等，这时候我们需要配置多个ssh。")]),s._v(" "),t("h2",{attrs:{id:"配置步骤"}},[s._v("配置步骤 "),t("a",{staticClass:"header-anchor",attrs:{href:"#配置步骤"}},[s._v("#")])]),s._v(" "),t("h3",{attrs:{id:"_1-取消全局的账户配置"}},[s._v("1. 取消全局的账户配置 "),t("a",{staticClass:"header-anchor",attrs:{href:"#_1-取消全局的账户配置"}},[s._v("#")])]),s._v(" "),t("p",[s._v("查看全局账户")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global user.name\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global user.email\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("如果存在，取消全局设置")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global --unset user.name\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global --unset user.email\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"_2-创建不同账户的ssh-key"}},[s._v("2. 创建不同账户的ssh key "),t("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建不同账户的ssh-key"}},[s._v("#")])]),s._v(" "),t("p",[s._v("进入保存秘钥的目录，根据邮箱生成秘钥")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/.ssh\nssh-keygen -t rsa -C "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"github@email.com"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("输入完成后，会有如下提示：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("Generating public/private rsa key pair.\nEnter "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" to save the key "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/Users/luojian/.ssh/id_rsa"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("这里要求对秘钥进行命名，默认的文件名是"),t("code",[s._v("id_rsa")]),s._v("。为了方便区分，命名为"),t("code",[s._v("id_rsa_github")]),s._v("。秘钥生成后通过"),t("code",[s._v("ls")]),s._v("命令，可以看到刚刚生成的密钥对"),t("code",[s._v("id_rsa_github")]),s._v("和"),t("code",[s._v("id_rsa_github.pub")]),s._v("。其中"),t("code",[s._v("id_rsa_github.pub")]),s._v("是公钥。")]),s._v(" "),t("p",[s._v("同样，对于GitLab上的账户，使用公司邮箱注册的，按照相同的步骤生成"),t("code",[s._v("id_rsa_gitlab")]),s._v("和"),t("code",[s._v("id_rsa_gitlab.pub")]),s._v("。")]),s._v(" "),t("h3",{attrs:{id:"_3-秘钥添加到ssh-agent"}},[s._v("3. 秘钥添加到ssh agent "),t("a",{staticClass:"header-anchor",attrs:{href:"#_3-秘钥添加到ssh-agent"}},[s._v("#")])]),s._v(" "),t("p",[s._v("SSH协议的原理，就是在托管网站上使用公钥，在本地使用私钥，这样本地仓库就可以和远程仓库进行通信。首先将私钥文件添加到ssh agent：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("ssh-agent "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\nssh-add ~/.ssh/id_rsa_github\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加GitHub私钥")]),s._v("\nssh-add ~/.ssh/id_rsa_gitlab\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加GitLab私钥")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"_4-本地私钥文件配置管理"}},[s._v("4. 本地私钥文件配置管理 "),t("a",{staticClass:"header-anchor",attrs:{href:"#_4-本地私钥文件配置管理"}},[s._v("#")])]),s._v(" "),t("p",[s._v("由于添加了多个密钥文件，所以需要对这多个密钥进行管理。在"),t("code",[s._v(".ssh")]),s._v("目录下新建一个config文件，文件内容如下：")]),s._v(" "),t("div",{staticClass:"language-txt line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# github配置\nHost github.com\t# 网站域名\nHostName github.com\t# 网站域名\nUser luojian\t# 用户\nIdentityFile ~/.ssh/id_rsa_github\t# 使用的秘钥文件\n\n# gitlab配置\nHost x.xx.xxx.com\t# 公司代码仓库的gitlab域名\nHostName x.xx.xxx.com\t# 公司代码仓库的gitlab域名\nUser luojian1\nIdentityFile ~/.ssh/id_rsa_gitlab\nPort 22222\t# 公司代码仓库的gitlab端口\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h3",{attrs:{id:"_5-公钥添加到托管网站"}},[s._v("5. 公钥添加到托管网站 "),t("a",{staticClass:"header-anchor",attrs:{href:"#_5-公钥添加到托管网站"}},[s._v("#")])]),s._v(" "),t("p",[s._v("将 .ssh 目录下的"),t("code",[s._v("id_rsa_github.pub")]),s._v("、"),t("code",[s._v("id_rsa_gitlab.pub")]),s._v("内的内容复制分别添加到Github和Gitlab的SSH keys中，添加成功后可使用以下命令测试：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -T git@github.com\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" -T git@x.xx.xxx.com\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 公司托管代码仓库域名")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"使用"}},[s._v("使用 "),t("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[s._v("#")])]),s._v(" "),t("p",[s._v("从远端拉取新仓库到本地操作与平常无异；如果是本地新建或已有仓库与远端关联，或者在多账户配置前从远程clone下来的仓库，需要单独配置该仓库的用户名和邮箱，进入本地仓库文件夹配置：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config user.name "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"luojian"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config user.eamil "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxxxxxxxxx@qq.com"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);