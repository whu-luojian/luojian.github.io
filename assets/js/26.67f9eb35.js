(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{806:function(e,v,_){"use strict";_.r(v);var t=_(112),o=Object(t.a)({},(function(){var e=this,v=e.$createElement,_=e._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[_("h1",[e._v("vite")]),e._v(" "),_("blockquote",[_("p",[e._v("vite：法语，快的意思；vue 也是法语，视图的意思")]),e._v(" "),_("p",[e._v("https://github.com/vitejs/create-vite-app")]),e._v(" "),_("p",[e._v("https://juejin.im/post/5eaeb6c4f265da7bae2f9914")])]),e._v(" "),_("p",[e._v("定位："),_("strong",[e._v("更轻、更快的，面向现代浏览器的开发工具")])]),e._v(" "),_("ul",[_("li",[e._v("基于浏览器原生的 ES module import 功能，来实现文件的加载")]),e._v(" "),_("li",[e._v("开发时无需打包，请求时在服务端按需编译返回，引用多少，编译多少")]),e._v(" "),_("li",[e._v("内置 vue 单文件支持（和 vue 不强绑定）、支持 ts，支持热更新，热更新的速度不会随着模块增多而变慢")]),e._v(" "),_("li",[e._v("生产环境用 内置的配置好的 rollup 打包，也是面向现代浏览器")])]),e._v(" "),_("h2",{attrs:{id:"支持-import-vue"}},[e._v("支持 "),_("code",[e._v("import vue")]),e._v(" "),_("a",{staticClass:"header-anchor",attrs:{href:"#支持-import-vue"}},[e._v("#")])]),e._v(" "),_("ol",[_("li",[_("code",[e._v("import xx from 'vue'")]),e._v(" 重写成 "),_("code",[e._v("import xx from '/@modules/vue.js'")])]),e._v(" "),_("li",[e._v("koa 拦截 @module 开头的请求，去 "),_("code",[e._v("node_modules")]),e._v(" 里找")])]),e._v(" "),_("h2",{attrs:{id:"vue-文件解析"}},[e._v(".vue 文件解析 "),_("a",{staticClass:"header-anchor",attrs:{href:"#vue-文件解析"}},[e._v("#")])]),e._v(" "),_("ol",[_("li",[_("code",[e._v(".vue")]),e._v(" 的文件拆成了三个请求（分别对应 "),_("code",[e._v("script")]),e._v("、"),_("code",[e._v("style")]),e._v(" 和"),_("code",[e._v("template")]),e._v("） ，以 url 的 query 参数进行区分")]),e._v(" "),_("li",[e._v("浏览器会先收到包含 "),_("code",[e._v("script")]),e._v(" 逻辑的 "),_("code",[e._v("App.vue")]),e._v(" 的响应，然后解析到 "),_("code",[e._v("template")]),e._v(" 和 "),_("code",[e._v("style")]),e._v(" 的路径后，会再次发起 HTTP 请求来请求对应的资源，此时 Vite 对其拦截并再次处理后返回相应的内容。")])]),e._v(" "),_("h2",{attrs:{id:"热更新"}},[e._v("热更新 "),_("a",{staticClass:"header-anchor",attrs:{href:"#热更新"}},[e._v("#")])]),e._v(" "),_("p",[e._v("Vite 的是通过 "),_("code",[e._v("WebSocket")]),e._v(" 来实现的热更新通信。")]),e._v(" "),_("p",[e._v("客户端的代码在 "),_("code",[e._v("src/client/client.ts")]),e._v("，主要是创建 "),_("code",[e._v("WebSocket")]),e._v(" 客户端，监听来自服务端的 HMR 消息推送。")]),e._v(" "),_("p",[e._v("Vite 的 WS 客户端目前监听这几种消息：")]),e._v(" "),_("ul",[_("li",[_("code",[e._v("connected")]),e._v(": WebSocket 连接成功")]),e._v(" "),_("li",[_("code",[e._v("vue-reload")]),e._v(": Vue 组件重新加载（当你修改了 script 里的内容时）")]),e._v(" "),_("li",[_("code",[e._v("vue-rerender")]),e._v(": Vue 组件重新渲染（当你修改了 template 里的内容时）")]),e._v(" "),_("li",[_("code",[e._v("style-update")]),e._v(": 样式更新")]),e._v(" "),_("li",[_("code",[e._v("style-remove")]),e._v(": 样式移除")]),e._v(" "),_("li",[_("code",[e._v("js-update")]),e._v(": js 文件更新")]),e._v(" "),_("li",[_("code",[e._v("full-reload")]),e._v(": fallback 机制，网页重刷新")])])])}),[],!1,null,null,null);v.default=o.exports}}]);