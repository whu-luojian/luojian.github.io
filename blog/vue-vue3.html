<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>vue 3 &amp; vite 介绍 | 前端杂货铺</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/me.png">
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.cd208850.css" as="style"><link rel="preload" href="/assets/js/app.def0c44f.js" as="script"><link rel="preload" href="/assets/js/2.652036c1.js" as="script"><link rel="preload" href="/assets/js/30.7682a3f0.js" as="script"><link rel="prefetch" href="/assets/js/10.86bcc285.js"><link rel="prefetch" href="/assets/js/11.f0da1a04.js"><link rel="prefetch" href="/assets/js/12.74bb5948.js"><link rel="prefetch" href="/assets/js/13.6d21ce20.js"><link rel="prefetch" href="/assets/js/14.55705fd0.js"><link rel="prefetch" href="/assets/js/15.d58971d7.js"><link rel="prefetch" href="/assets/js/16.8fc4cc7f.js"><link rel="prefetch" href="/assets/js/17.09c3b3ea.js"><link rel="prefetch" href="/assets/js/18.b8fe791d.js"><link rel="prefetch" href="/assets/js/19.74527142.js"><link rel="prefetch" href="/assets/js/20.b9038e1c.js"><link rel="prefetch" href="/assets/js/21.da99261e.js"><link rel="prefetch" href="/assets/js/22.3136e74b.js"><link rel="prefetch" href="/assets/js/23.b9f139eb.js"><link rel="prefetch" href="/assets/js/24.b662be39.js"><link rel="prefetch" href="/assets/js/25.81cfa59f.js"><link rel="prefetch" href="/assets/js/26.ac900e70.js"><link rel="prefetch" href="/assets/js/27.4bf9e758.js"><link rel="prefetch" href="/assets/js/28.9eb8976a.js"><link rel="prefetch" href="/assets/js/29.11814d09.js"><link rel="prefetch" href="/assets/js/3.ac04a323.js"><link rel="prefetch" href="/assets/js/31.e413b480.js"><link rel="prefetch" href="/assets/js/32.5dd51200.js"><link rel="prefetch" href="/assets/js/33.8263f3bc.js"><link rel="prefetch" href="/assets/js/34.f4d6a174.js"><link rel="prefetch" href="/assets/js/35.e20b81f0.js"><link rel="prefetch" href="/assets/js/36.15bc20e7.js"><link rel="prefetch" href="/assets/js/37.d8c0d7a3.js"><link rel="prefetch" href="/assets/js/38.1ded9591.js"><link rel="prefetch" href="/assets/js/39.1c823ed2.js"><link rel="prefetch" href="/assets/js/4.cff3d84d.js"><link rel="prefetch" href="/assets/js/40.f22a81a2.js"><link rel="prefetch" href="/assets/js/41.d5341c7c.js"><link rel="prefetch" href="/assets/js/42.71f8d22a.js"><link rel="prefetch" href="/assets/js/43.2aecf01a.js"><link rel="prefetch" href="/assets/js/44.e627b7fa.js"><link rel="prefetch" href="/assets/js/45.e57cda60.js"><link rel="prefetch" href="/assets/js/46.510e3c27.js"><link rel="prefetch" href="/assets/js/47.49656f4b.js"><link rel="prefetch" href="/assets/js/48.e0b0e2ed.js"><link rel="prefetch" href="/assets/js/49.16749f9d.js"><link rel="prefetch" href="/assets/js/5.a519ad94.js"><link rel="prefetch" href="/assets/js/50.9bd62b2a.js"><link rel="prefetch" href="/assets/js/51.9ff7ce75.js"><link rel="prefetch" href="/assets/js/52.27948954.js"><link rel="prefetch" href="/assets/js/53.bbf4d444.js"><link rel="prefetch" href="/assets/js/54.d5cda000.js"><link rel="prefetch" href="/assets/js/6.2ed5663e.js"><link rel="prefetch" href="/assets/js/7.3934fec8.js"><link rel="prefetch" href="/assets/js/8.14b0bd86.js"><link rel="prefetch" href="/assets/js/9.3f5f5ca6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cd208850.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7ed26831><header class="navbar" data-v-7ed26831><div class="ant-row"><div class="sidebar-button"><i aria-label="icon: bars" class="anticon anticon-bars"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="bars" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"></path></svg></i> <span></span></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4"><a href="/" class="router-link-active home-link"><img src="/me.png" alt="前端杂货铺" class="logo"> <span class="site-name">前端杂货铺</span></a> <div class="search-box mobile-search"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div> <div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20"><div placeholder="搜索..." class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><ul role="menu" id="nav" class="ant-menu ant-menu-horizontal ant-menu-root ant-menu-light"><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item ant-menu-item-selected"><a href="/blog/" class="router-link-active">
          博客
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/book/">
          阅读
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-item"><a href="/interview/">
          面试
        </a></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>
          工具库
        </span><i class="ant-menu-submenu-arrow"></i></div></li><li role="menuitem" class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute;"><div aria-haspopup="true" class="ant-menu-submenu-title"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul> <a href="https://github.com/whu-luojian/blog" target="_blank" rel="noopener noreferrer" class="repo-link"><i aria-label="icon: github" class="anticon anticon-github"><svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></i></a></nav></div></div> <!----></header> <div class="main-wrapper" data-v-7ed26831><div class="ant-row" data-v-7ed26831><div class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-6 ant-col-lg-5 ant-col-xl-5 ant-col-xxl-4" data-v-7ed26831><div style="width:100%;" data-v-7ed26831><div><aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Linux</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/linux-command.html" class="sidebar-link">Linux 常用命令</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Git</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/git-version-control.html" class="sidebar-link">软件开发中的版本控制</a></li><li><a href="/blog/git-account-config.html" class="sidebar-link">Git 多账户配置</a></li><li><a href="/blog/git-advance.html" class="sidebar-link">Git 进阶</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>HTML</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/html-you-not-know.html" class="sidebar-link">你不知道的HTML</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CSS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/css-cup-and-wing.html" class="sidebar-link">圣杯布局和双飞翼布局</a></li><li><a href="/blog/css-fc.html" class="sidebar-link">CSS 格式化上下文</a></li><li><a href="/blog/css-compatibility.html" class="sidebar-link">CSS 浏览器兼容性</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/js-execution.html" class="sidebar-link">JavaScript 执行原理</a></li><li><a href="/blog/js-object-oriented.html" class="sidebar-link">JavaScript 面向对象：原型和继承</a></li><li><a href="/blog/tail-recursion.html" class="sidebar-link">尾调用和尾递归</a></li><li><a href="/blog/functional-programming.html" class="sidebar-link">函数式编程</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>浏览器</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/browser-frontend-cache.html" class="sidebar-link">一文读懂前端缓存</a></li><li><a href="/blog/browser-fps.html" class="sidebar-link">你真的了解 FPS 吗</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/vue-nextTick.html" class="sidebar-link">vue nextTick 引发的思考</a></li><li><a href="/blog/vue-vuex.html" class="sidebar-link">Vuex 源码解析</a></li><li><a href="/blog/vue-vue3.html" aria-current="page" class="active sidebar-link">vue 3 &amp; vite 介绍</a></li><li><a href="/blog/vue-tracker.html" class="sidebar-link">vue web端埋点方案优化</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>工程化</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/webpack.html" class="sidebar-link">webpack 运行机制和 webpack 5</a></li><li><a href="/blog/webpack-optimize.html" class="sidebar-link">Webpack 性能优化</a></li><li><a href="/blog/webpack-snippet.html" class="sidebar-link">webpack 快问快答</a></li><li><a href="/blog/npm.html" class="sidebar-link">npm 安装机制</a></li><li><a href="/blog/yarn.html" class="sidebar-link">Yarn 安装机制</a></li><li><a href="/blog/core-js.html" class="sidebar-link">core-js &amp; polyfill</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>其它</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/other-navigation.html" class="sidebar-link">网站导航</a></li><li><a href="/blog/wonderful-article.html" class="sidebar-link">优秀文章导航</a></li><li><a href="/blog/other-daily.html" class="sidebar-link">日常小知识点</a></li></ul></section></li></ul> </aside></div></div></div> <div class="ant-col ant-col-xs-24 ant-col-sm-24 ant-col-md-18 ant-col-lg-19 ant-col-xl-19 ant-col-xxl-20" data-v-7ed26831><main class="page" data-v-7ed26831> <div><div><div class="table-of-contents-default"><ul class="toc"><li title="vue 3 发展现状"><a href="#vue-3-发展现状" class="toc-anchor">vue 3 发展现状</a></li><li title="vue 2.x 怎么办"><a href="#vue-2-x-怎么办" class="toc-anchor">vue 2.x 怎么办</a></li><li title="上手 vue3 开发"><a href="#上手-vue3-开发" class="toc-anchor">上手 vue3 开发</a></li><li title="vue 3 亮点"><a href="#vue-3-亮点" class="toc-anchor">vue 3 亮点</a></li><li title="Composition API"><a href="#composition-api-2" class="toc-anchor">Composition API</a></li><li title="性能"><a href="#性能" class="toc-anchor">性能</a></li><li title="vite"><a href="#vite" class="toc-anchor">vite</a></li></ul></div></div></div> <div class="theme-antdesign-content content__default"><h1>vue 3 &amp; vite 介绍</h1> <h2 id="vue-3-发展现状">vue 3 发展现状 <a href="#vue-3-发展现状" class="header-anchor">#</a></h2> <p>一款框架诞生需要经过的阶段</p> <ol><li>开发</li> <li>alpha版：内部测试版 α</li> <li>beta版：公开测试版 β</li> <li>rc版：release candidate（候选版本）</li> <li>stable版：稳定版</li></ol> <p>2020年4 月 17 日，vue 3 正式进入 beta 阶段。vue 3框架相关项目状态如下:</p> <table><thead><tr><th>projects</th> <th>status</th> <th>repo</th></tr></thead> <tbody><tr><td>vue 3（vue-next）</td> <td><a href="https://www.npmjs.com/package/vue/v/next" target="_blank" rel="noopener noreferrer"><img src="https://camo.githubusercontent.com/35043cce2a552b9c29e6e2267f4c9c9baec31090/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f762f7675652f6e6578742e737667" alt="beta"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td><a href="https://github.com/vuejs/vue-next" target="_blank" rel="noopener noreferrer">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://github.com/vuejs/rfcs" target="_blank" rel="noopener noreferrer">RFCs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td>vue-router</td> <td><a href="https://www.npmjs.com/package/vue-router/v/next" target="_blank" rel="noopener noreferrer"><img src="https://camo.githubusercontent.com/8c14172146de976291c555b24839bd6e7f65a3a7/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f762f7675652d726f757465722f6e6578742e737667" alt="alpha"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td><a href="https://github.com/vuejs/vue-router-next" target="_blank" rel="noopener noreferrer">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td>vuex</td> <td><a href="https://www.npmjs.com/package/vuex/v/next" target="_blank" rel="noopener noreferrer"><img src="https://camo.githubusercontent.com/fbf0df4356b468846273e602cac7c43ef6fe7d5d/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f762f767565782f6e6578742e737667" alt="beta"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td><a href="https://github.com/vuejs/vuex/tree/4.0" target="_blank" rel="noopener noreferrer">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td>vue-cli</td> <td>experimental support via <a href="https://github.com/vuejs/vue-cli-plugin-vue-next" target="_blank" rel="noopener noreferrer">vue-cli-plugin-vue-next<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> plugin</td> <td></td></tr> <tr><td>vue-class-component</td> <td><a href="https://www.npmjs.com/package/vue-class-component/v/next" target="_blank" rel="noopener noreferrer"><img src="https://camo.githubusercontent.com/fc82739bb3325866c2a1d1f5cef0bd9716ad1a48/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f762f7675652d636c6173732d636f6d706f6e656e742f6e6578742e737667" alt="alpha"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td><a href="https://github.com/vuejs/vue-class-component/tree/next" target="_blank" rel="noopener noreferrer">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td>eslint-plugin-vue</td> <td><a href="https://www.npmjs.com/package/eslint-plugin-vue/v/next" target="_blank" rel="noopener noreferrer"><img src="https://camo.githubusercontent.com/7dc2a967c0c73760ff7a9e82b369f398a4e68e49/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f762f65736c696e742d706c7567696e2d7675652f6e6578742e737667" alt="alpha"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td><a href="https://github.com/vuejs/eslint-plugin-vue" target="_blank" rel="noopener noreferrer">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td>rollup-plugin-vue</td> <td><a href="https://www.npmjs.com/package/rollup-plugin-vue/v/next" target="_blank" rel="noopener noreferrer"><img src="https://camo.githubusercontent.com/ae1916f09be64023634f22995210dd4115b12f22/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f762f726f6c6c75702d706c7567696e2d7675652f6e6578742e737667" alt="alpha"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td> <td><a href="https://github.com/vueComponent/jsx" target="_blank" rel="noopener noreferrer">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td>vue-devtools</td> <td>WIP (beta channel with Vue 3 support in early July)</td> <td></td></tr></tbody></table> <p>vue3 预计八月份发版</p> <h2 id="vue-2-x-怎么办">vue 2.x 怎么办 <a href="#vue-2-x-怎么办" class="header-anchor">#</a></h2> <ul><li>vue目前稳定的版本：<code>2.6.x</code></li> <li>后续会出最后一个小版本 <code>2.7.x</code>，底层代码全面兼容 3.0，可以迁移到 3.0 的部分会给予醒目提示</li> <li>维护18个月之后，除安全漏洞更新之外，其余的不再继续更新</li></ul> <p>建议：<code>Vue 3</code> 虽好，如果你的项目很稳定，且对新功能无过多的要求或者迁移成本过高，则不建议升级。</p> <h2 id="上手-vue3-开发">上手 vue3 开发 <a href="#上手-vue3-开发" class="header-anchor">#</a></h2> <h3 id="vite-vue3">vite + vue3 <a href="#vite-vue3" class="header-anchor">#</a></h3> <p><code>demo</code>地址：<a href="https://github.com/whu-luojian/vite-vue3" target="_blank" rel="noopener noreferrer"><strong>demo</strong><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><code>vite</code>：<a href="https://github.com/vitejs/vite" target="_blank" rel="noopener noreferrer">https://github.com/vitejs/vite<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><code>create-vite-app</code>：<a href="https://github.com/vitejs/create-vite-app" target="_blank" rel="noopener noreferrer">https://github.com/vitejs/create-vite-app<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li>基于浏览器原生 ES imports 的开发服务器</li> <li>同时不仅有 Vue 文件支持，支持热更新，而且热更新的速度不会随着模块增多而变慢</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">npm</span> init vite-app <span class="token operator">&lt;</span>project-name<span class="token operator">&gt;</span>  // <span class="token function">npm</span> init <span class="token operator">&lt;</span>initializer<span class="token operator">&gt;</span>
$ <span class="token builtin class-name">cd</span> <span class="token operator">&lt;</span>project-name<span class="token operator">&gt;</span>
$ <span class="token function">npm</span> <span class="token function">install</span>
$ <span class="token function">npm</span> run dev

或者

$ <span class="token function">yarn</span> create vite-app <span class="token operator">&lt;</span>project-name<span class="token operator">&gt;</span>
$ <span class="token builtin class-name">cd</span> <span class="token operator">&lt;</span>project-name<span class="token operator">&gt;</span>
$ <span class="token function">yarn</span>
$ <span class="token function">yarn</span> dev
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="webpack-vue3">webpack + vue3 <a href="#webpack-vue3" class="header-anchor">#</a></h3> <blockquote><p><a href="https://github.com/vuejs/vue-cli-plugin-vue-next" target="_blank" rel="noopener noreferrer">vue-cli-plugin-vue-next<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ：<code>A Vue CLI plugin for trying out the Vue 3 beta.</code></p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>// <span class="token number">1</span>. 使用 @vue/cli 创建 vue2.x 项目
$ <span class="token function">npm</span> <span class="token function">install</span> -g @vue/cli
$ vue --version
$ vue create <span class="token operator">&lt;</span>project-name<span class="token operator">&gt;</span>

// <span class="token number">2</span>. 将 vue2.x 项目升级到 vue3
$ <span class="token builtin class-name">cd</span> <span class="token operator">&lt;</span>project-name<span class="token operator">&gt;</span>
$ vue <span class="token function">add</span> vue-next
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>升级后变化：</p> <p><code>package.json</code>：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.0.0-beta.1&quot;</span><span class="token punctuation">,</span>  			<span class="token comment">// &quot;^2.6.11&quot; --&gt; &quot;^3.0.0-beta.1&quot;</span>
    <span class="token property">&quot;vue-router&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.0.0-alpha.6&quot;</span><span class="token punctuation">,</span> 	<span class="token comment">// &quot;^3.2.0&quot;  --&gt; &quot;^4.0.0-alpha.6&quot;</span>
    <span class="token property">&quot;vuex&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.0.0-alpha.1&quot;</span>			<span class="token comment">// &quot;^3.4.0&quot;	 --&gt; &quot;^4.0.0-alpha.1&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;@vue/compiler-sfc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.0.0-beta.1&quot;</span><span class="token punctuation">,</span>	<span class="token comment">// 移除&quot;vue-template-compiler&quot;: &quot;^2.6.11&quot;</span>
    										<span class="token comment">// 新增&quot;@vue/compiler-sfc&quot;: &quot;^3.0.0-beta.1&quot;</span>
    <span class="token property">&quot;@vue/test-utils&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.0.0-alpha.1&quot;</span><span class="token punctuation">,</span>	<span class="token comment">// &quot;^1.0.3&quot; --&gt; &quot;^2.0.0-alpha.1&quot;</span>
    <span class="token property">&quot;eslint-plugin-vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.0.0-alpha.0&quot;</span><span class="token punctuation">,</span>	<span class="token comment">// &quot;^6.2.2&quot; --&gt; &quot;^7.0.0-alpha.0&quot;</span>
    <span class="token property">&quot;vue-cli-plugin-vue-next&quot;</span><span class="token operator">:</span> <span class="token string">&quot;~0.1.3&quot;</span>		<span class="token comment">// 新增</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><code>.eslintrc.js</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
<span class="token operator">--</span>  <span class="token string">'plugin:vue/essential'</span><span class="token punctuation">,</span>			<span class="token comment">// 移除</span>
<span class="token operator">++</span>  <span class="token string">'plugin:vue/vue3-essential'</span><span class="token punctuation">,</span>	<span class="token comment">// 新增</span>
    <span class="token string">'@vue/standard'</span><span class="token punctuation">,</span>
    <span class="token string">'@vue/typescript/recommended'</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>除了以上变化，<code>vue</code> 、<code>vue-router</code>、<code>vuex</code> 相关文件也变更了（<code>API</code> 发生变化了）</p> <h2 id="vue-3-亮点">vue 3 亮点 <a href="#vue-3-亮点" class="header-anchor">#</a></h2> <h3 id="composition-api"><code>Composition API</code> <a href="#composition-api" class="header-anchor">#</a></h3> <p>与<code>React Hooks</code> 类似。</p> <ul><li><p>组合式 <code>API</code>，替换原有的 <code>Options API</code></p> <ul><li>更好的逻辑复用与代码组织</li> <li>更好的类型推导</li></ul></li> <li><p>可与现有的 <code>Options API</code>一起使用</p></li></ul> <p>混入(<code>mixin</code>) 将不再作为推荐使用， <code>Composition API</code>可以实现更灵活且无副作用的复用代码。</p> <p>API 地址：<a href="https://composition-api.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">https://composition-api.vuejs.org/zh/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="performance"><code>Performance</code> <a href="#performance" class="header-anchor">#</a></h3> <ul><li>重写了 <code>virtual dom</code></li> <li>编译模板优化：hoistStatic（静态块提升）、cacheHandlers（事件监听器缓存）、blockTree（跳过static节点，使用patchFlag优化diff性能）等等</li> <li>更高效的组件初始化（mount性能提高50%）</li> <li><code>update</code>性能提高 1.3~2 倍</li> <li><code>ssr</code>性能提高了 2~3 倍（不依赖<code>virtual dom</code>）</li></ul> <p><a href="https://vue-next-template-explorer.netlify.app/" target="_blank" rel="noopener noreferrer">https://vue-next-template-explorer.netlify.app/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="tree-shaking"><code>Tree shaking</code> <a href="#tree-shaking" class="header-anchor">#</a></h3> <ul><li>可以将无用模块“剪辑”，仅打包需要的（比如<code>v-model,&lt;transition&gt;</code>，用不到就不会打包）。</li> <li>一个简单“<code>HelloWorld</code>”大小仅为：13.5kb</li> <li>11.75kb，仅<code>Composition API</code>。</li> <li>包含运行时完整功能：22.5kb</li> <li>拥有更多的功能，却比<code>Vue 2</code>更迷你。</li></ul> <p>很多时候，我们并不需要 <code>vue</code>提供的所有功能，在 <code>vue 2</code> 并没有方式排除掉，但是 3.0 都可能做成了按需引入。</p> <h3 id="better-typescript-support"><code>Better TypeScript Support</code> <a href="#better-typescript-support" class="header-anchor">#</a></h3> <ul><li><code>Vue 3</code>是用<code>TypeScript</code>编写的库，可以享受到自动的类型定义提示</li> <li><code>class</code>组件还会继续支持，但是需要引入<code>vue-class-component@next</code>，不是很建议使用。</li></ul> <h3 id="custom-renderer-api"><code>Custom Renderer API</code> <a href="#custom-renderer-api" class="header-anchor">#</a></h3> <ul><li>自定义渲染器 <code>API</code>（runtime 拆分）</li></ul> <h3 id="一些碎片">一些碎片 <a href="#一些碎片" class="header-anchor">#</a></h3> <ul><li>Fragment：不再限于模板中的单个根节点，<code>render</code> 函数也可以返回数组了</li> <li><code>&lt;Teleport&gt;</code>：传送门，对标<code>React Portal</code>，用于渲染vue的组件内容到指定的dom节点，做弹窗比较有用</li> <li><code>&lt;Suspense&gt;</code>：异步组件，和<code>async setup()</code>结合使用</li></ul> <h2 id="composition-api-2">Composition API <a href="#composition-api-2" class="header-anchor">#</a></h2> <blockquote><p>文档：<a href="https://composition-api.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">https://composition-api.vuejs.org/zh/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h3 id="目的">目的 <a href="#目的" class="header-anchor">#</a></h3> <ul><li>更好的逻辑复用与代码组织，替代 <code>mixin</code></li> <li>更好的类型推导</li></ul> <h3 id="用法：setup-reactivity">用法：setup + reactivity <a href="#用法：setup-reactivity" class="header-anchor">#</a></h3> <h4 id="setup">setup <a href="#setup" class="header-anchor">#</a></h4> <p><code>setup</code> 是新的选项，可以理解为 <code>composition</code> 的入口，<code>setup</code> 函数在 <code>beforeCreate</code> 之前调用，函数返回的内容会作为模板的渲染上下文。</p> <h4 id="ref">ref <a href="#ref" class="header-anchor">#</a></h4> <p>将基础数据类型包装成一个响应式对象。</p> <h4 id="reactive">reactive <a href="#reactive" class="header-anchor">#</a></h4> <p>接收一个普通对象然后返回该普通对象的响应式代理。等同于 <code>vue 2.x</code> 的 <code>Vue.observable</code>。</p> <p><code>Proxy</code> 取代 <code>Object.defineProperty</code></p> <h4 id="effect">effect <a href="#effect" class="header-anchor">#</a></h4> <p>函数用于定义副作用，它的参数就是副作用函数。在副作用函数内的响应式数据会与副作用函数之间建立联系，即所谓的依赖收集，当响应式数据变化之后，会导致副作用函数重新执行。</p> <p><code>effect()</code> 函数来自于 <code>@vue/reactivity</code> ，<code>watchEffect()</code> 函数来自于 <code>@vue/runtime-core</code>。它们的区别在于：<code>effect()</code> 是非常底层的实现，<code>watchEffect()</code> 是基于 <code>effect()</code> 的封装，<code>watchEffect()</code> 会维护与组件实例以及组件状态(是否被卸载等)的关系，如果一个组件被卸载，那么 <code>watchEffect()</code> 也将被 <code>stop</code>。</p> <h4 id="computed">computed <a href="#computed" class="header-anchor">#</a></h4> <p>计算属性， ref 对象，本质是 effect</p> <h2 id="性能">性能 <a href="#性能" class="header-anchor">#</a></h2> <h3 id="proxy">Proxy <a href="#proxy" class="header-anchor">#</a></h3> <p><code>Proxy</code> 取代 <code>defineProperty</code></p> <ul><li>全语言特性支持：对象属性的增添/删除、数组index/length修改、<code>Map</code>、<code>Set</code>、<code>WeakMap</code>、<code>WeakSet</code> 等</li> <li>更好的性能：不需要初始化 <code>defineProperty</code>，减少组件初始化开销</li></ul> <h3 id="vdom-发展">vdom 发展 <a href="#vdom-发展" class="header-anchor">#</a></h3> <h4 id="vue1-x">Vue1.x <a href="#vue1-x" class="header-anchor">#</a></h4> <p><img src="vue1-vdom.png" alt="img"></p> <h4 id="react-15">React 15 <a href="#react-15" class="header-anchor">#</a></h4> <p><img src="react15-vdom.png" alt="img"></p> <h3 id="vue-2">Vue 2 <a href="#vue-2" class="header-anchor">#</a></h3> <p><img src="vue2-vdom.png" alt="img"></p> <h3 id="react-16-fiber">React 16 Fiber <a href="#react-16-fiber" class="header-anchor">#</a></h3> <p><img src="react16-vdom.png" alt="img"></p> <h3 id="vue-3">vue 3 <a href="#vue-3" class="header-anchor">#</a></h3> <p><code>vdom</code> 重写：<strong>更多的编译时优化，减少运行时开销</strong></p> <ul><li>静态标记：纯静态节点会被标记（<code>_createVNode</code> 第四个参数不传），<code>dom diff</code> 时忽略</li> <li><code>_createVNode</code> 第四个参数可以判断哪些属性是动态的，<code>dom diff</code> 时只比较动态的属性</li> <li><code>dom diff</code> 算法：<code>vue2</code> 双端比较，<code>vue3</code> 加入了最长递增子序列</li></ul> <h2 id="vite">vite <a href="#vite" class="header-anchor">#</a></h2> <blockquote><p>vite：法语，快的意思；vue 也是法语，视图的意思</p> <p><a href="https://github.com/vitejs/create-vite-app" target="_blank" rel="noopener noreferrer">https://github.com/vitejs/create-vite-app<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://juejin.im/post/5eaeb6c4f265da7bae2f9914" target="_blank" rel="noopener noreferrer">https://juejin.im/post/5eaeb6c4f265da7bae2f9914<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>定位：<strong>更轻、更快的，面向现代浏览器的开发工具</strong></p> <ul><li>基于浏览器原生的 ES module import 功能，来实现文件的加载</li> <li>开发时无需打包，请求时在服务端按需编译返回，引用多少，编译多少</li> <li>内置 vue 单文件支持（和 vue 不强绑定）、支持 ts，支持热更新，热更新的速度不会随着模块增多而变慢</li> <li>生产环境用 内置的配置好的 rollup 打包，也是面向现代浏览器</li></ul> <h3 id="支持-import-vue">支持 <code>import vue</code> <a href="#支持-import-vue" class="header-anchor">#</a></h3> <ol><li><code>import xx from 'vue'</code> 重写成 <code>import xx from '/@modules/vue.js'</code></li> <li>koa 拦截 @module 开头的请求，去 <code>node_modules</code> 里找</li></ol> <h3 id="vue-文件解析">.vue 文件解析 <a href="#vue-文件解析" class="header-anchor">#</a></h3> <ol><li><code>.vue</code> 的文件拆成了三个请求（分别对应 <code>script</code>、<code>style</code> 和<code>template</code>） ，以 url 的 query 参数进行区分</li> <li>浏览器会先收到包含 <code>script</code> 逻辑的 <code>App.vue</code> 的响应，然后解析到 <code>template</code> 和 <code>style</code> 的路径后，会再次发起 HTTP 请求来请求对应的资源，此时 Vite 对其拦截并再次处理后返回相应的内容。</li></ol> <h3 id="热更新">热更新 <a href="#热更新" class="header-anchor">#</a></h3> <p>Vite 的是通过 <code>WebSocket</code> 来实现的热更新通信。</p> <p>客户端的代码在 <code>src/client/client.ts</code>，主要是创建 <code>WebSocket</code> 客户端，监听来自服务端的 HMR 消息推送。</p> <p>Vite 的 WS 客户端目前监听这几种消息：</p> <ul><li><code>connected</code>: WebSocket 连接成功</li> <li><code>vue-reload</code>: Vue 组件重新加载（当你修改了 script 里的内容时）</li> <li><code>vue-rerender</code>: Vue 组件重新渲染（当你修改了 template 里的内容时）</li> <li><code>style-update</code>: 样式更新</li> <li><code>style-remove</code>: 样式移除</li> <li><code>js-update</code>: js 文件更新</li> <li><code>full-reload</code>: fallback 机制，网页重刷新</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/whu-luojian/blog/edit/master/docs/blog/vue-vue3.md" target="_blank" rel="noopener noreferrer">本文源码地址</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">7/24/2020, 3:25:14 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/blog/vue-vuex.html" class="prev"><i aria-label="icon: left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></i>
        Vuex 源码解析
      </a></span> <span class="next"><a href="/blog/vue-tracker.html">
        vue web端埋点方案优化
        <i aria-label="icon: right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"></path></svg></i></a></span></p></div> </main></div></div></div> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.def0c44f.js" defer></script><script src="/assets/js/2.652036c1.js" defer></script><script src="/assets/js/30.7682a3f0.js" defer></script>
  </body>
</html>
